# Qdrant Configuration
qdrant:
  url: "QDRANT_URL"
  collection_name: "code_dna"

# Embedding Configuration
embeddings:
  # Provider: fastembed (local), openai (API), or huggingface (local)
  provider: "fastembed"

  # Model selection based on your needs:
  # Code-optimized (recommended):
  #   - jinaai/jina-embeddings-v2-base-code (768 dim, best for code)
  #   - BAAI/bge-base-en-v1.5 (768 dim, good all-around)
  # Lightweight:
  #   - BAAI/bge-small-en-v1.5 (384 dim, fast, current default)
  #   - sentence-transformers/all-MiniLM-L6-v2 (384 dim)
  # Large/High quality:
  #   - nomic-ai/nomic-embed-text-v1.5 (768 dim, newest)
  model: "jinaai/jina-embeddings-v2-base-code"

  # Vector dimensions (auto-detected, but can override)
  # vector_size: 768

  # Chunking strategy for large code files
  chunking:
    enabled: true
    max_chunk_size: 512  # tokens
    chunk_overlap: 50    # tokens overlap between chunks
    strategy: "smart"    # smart (respects code structure) or simple

  # Code-specific preprocessing
  preprocessing:
    normalize_whitespace: true
    include_comments: true
    include_docstrings: true
    remove_empty_lines: false

# Search Configuration
search:
  # Hybrid search combines semantic (vector) and keyword (text) matching
  hybrid_enabled: true
  semantic_weight: 0.7  # Weight for semantic similarity (0-1)
  keyword_weight: 0.3   # Weight for keyword matching (0-1)

# GitHub Configuration
github:
  # Token loaded from environment variable for security
  token_env_var: "GITHUB_TOKEN"
  
  # Repository filters
  include_private: true
  include_orgs: true
  
  # Repos to always exclude (glob patterns)
  excluded_repos:
    - "dotfiles"
    - "archived-*"
    - "*.github.io"

# LLM Configuration
llm:
  # Provider: gemini, openai, or mock (for testing)
  provider: "mock"
  
  # Model to use
  model: "mock-model"
  
  # Minimum quality score for patterns (1-10)
  min_quality_score: 3

# Discovery Configuration
discovery:
  ignored_dirs:
    - ".git"
    - "node_modules"
    - "venv"
    - "__pycache__"
    - "dist"
    - "build"
    - "target"
    - ".idea"
    - ".vscode"
    - "vendor"
    - ".gradle"
    - "bin"
    - "obj"
  
  supported_extensions:
    - ".py"
    - ".ts"
    - ".js"
    - ".tsx"
    - ".jsx"
    - ".go"
    - ".java"
    - ".cs"

# C# Audit Configuration
csharp_audit:
  metrics:
    # God Object Detection thresholds
    lcom_threshold: 0.8          # Classes with LCOM > 0.8 have low cohesion
    loc_threshold: 500           # Classes with > 500 LOC are too large
    cyclomatic_complexity_limit: 15  # Max cyclomatic complexity per method

  dependencies:
    max_per_class: 7             # Maximum dependencies per class
    max_per_namespace: 50        # Maximum external dependencies per namespace

  patterns:
    include_partial_classes: true     # Aggregate partial classes
    extract_di_registrations: true    # Extract from Program.cs/Startup.cs
    detect_async_patterns: true       # Detect async-over-sync issues
    detect_design_patterns: true      # Detect design patterns (Singleton, Factory, CQRS, etc.)

# Scaffolding Configuration
scaffolding:
  # Default output directory for new projects
  output_dir: "./generated_projects"

# Python Configuration
python:
  # Use system Python by default
  interpreter: "python"
